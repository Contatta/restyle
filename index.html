<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Restyle : " />
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <title>Restyle</title>
  </head>
  <body>
    <h3>try it</h3>
    <div class="compare">
      <div><textarea id="code" rows="10">restyle({
  // css
}, [
  // prefixes
]);</textarea><pre></pre><button>linkify</button></div><br/>
    </div>
    <h3>basic example</h3>
    <div class="compare">
      <div><pre>
restyle({
  body: {
    background: '#EEE'
  }
}, []);
      </pre><pre>

body {
  background: #EEE;
}
      </pre></div><br/>
    </div>
    <h3>some nested property</h3>
    <div class="compare">
      <div><pre>
restyle({
  'body:last-child': {
    background: {
      color: 'transparent',
      image: 'url("some-image.png")',
      repeat: 'no-repeat'
    }
  }
}, []);
      </pre><pre>

body:last-child {
  background-color: transparent;
  background-image: url("some-image.png");
  background-repeat: no-repeat;
}
      </pre></div><br/>
    </div>
    <h3>using some vendor prefix</h3>
    <div class="compare">
      <div><pre>
restyle({
  'div > button:first-child': {
    transform: 'rotate(30deg)'
  }
}, ['moz', 'webkit']);
      </pre><pre>

div > button:first-child {
  -webkit-transform: rotate(30deg);
  -moz-transform: rotate(30deg);
  transform: rotate(30deg);
}
      </pre></div><br/>
    </div>
    <h3>@special key with all vendor prefixes</h3>
    <div class="compare">
      <div><pre>
restyle({
  'body > div': {
    animation: {
      name: 'spin',
      duration: '4s'
    }
  },
  '@keyframes spin': {
    from: {
      transform: 'rotate(0deg)'
    },
    to: {
      transform: 'rotate(360deg)'
    }
  }
});
      </pre><pre>

body > div{
  -webkit-animation-name:spin;
  -moz-animation-name:spin;
  -ms-animation-name:spin;
  -o-animation-name:spin;
  animation-name:spin;
  -webkit-animation-duration:4s;
  -moz-animation-duration:4s;
  -ms-animation-duration:4s;
  -o-animation-duration:4s;
  animation-duration:4s;
}
@-webkit-keyframes spin{
  from{
    -webkit-transform:rotate(0deg);
    transform:rotate(0deg);
  }
  to{
    -webkit-transform:rotate(360deg);
    transform:rotate(360deg);
  }
}
@-moz-keyframes spin{
  from{
    -moz-transform:rotate(0deg);
    transform:rotate(0deg);
  }
  to{
    -moz-transform:rotate(360deg);
    transform:rotate(360deg);
  }
}
@-ms-keyframes spin{
  from{
    -ms-transform:rotate(0deg);
    transform:rotate(0deg);
  }
  to{
    -ms-transform:rotate(360deg);
    transform:rotate(360deg);
  }
}
@-o-keyframes spin{
  from{
    -o-transform:rotate(0deg);
    transform:rotate(0deg);
  }
  to{
    -o-transform:rotate(360deg);
    transform:rotate(360deg);
  }
}
@keyframes spin{
  from{
    -webkit-transform:rotate(0deg);
    -moz-transform:rotate(0deg);
    -ms-transform:rotate(0deg);
    -o-transform:rotate(0deg);
    transform:rotate(0deg);
  }
  to{
    -webkit-transform:rotate(360deg);
    -moz-transform:rotate(360deg);
    -ms-transform:rotate(360deg);
    -o-transform:rotate(360deg);
    transform:rotate(360deg);
  }
}
      </pre></div><br/>
    </div>
    <script src="javascripts/cssbeautify.js"></script>
    <script src="test/build/restyle.js"></script>
    <script>
    /*@cc_on // @source https://gist.github.com/WebReflection/7286687
    (function(f){
     window.setTimeout =f(window.setTimeout);
     window.setInterval =f(window.setInterval);
    })(function(f){return function(c,t){var a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
    @*/
    var Delayed=function(e){function d(){Infinity===this.waiting&&0===this.waiting||clearTimeout(this.waiting);this.waiting=0}function f(c,b,a,d){c.waiting=0;b.apply(a,d)}function c(e,b){function a(){d.call(a);a.waiting=setTimeout(f,b,a,e,this,arguments)}b||(b=c.delay);a.clear=d;a.waiting=Infinity;return a}c.delay=e;return c}(500);
    (function(){
      function onkeyup(){
        try {
          var obj = Function('return ' + this.value.replace(/^\s+/, ''))();
          obj.remove();
          pre[text] = cssbeautify('' + obj);
        } catch(o_O){
          // invalid syntax
        }
        this.rows = Math.max(rows, this.value.split(/[\n\r]/).length + 1);
      }
      var
        code = document.getElementById('code'),
        pre = code.nextSibling,
        linkify = pre.nextSibling,
        text = 'textContent' in pre ? 'textContent' : 'innerText',
        rows = code.rows,
        value = location.href.split('?').slice(1).join('')
      ;
      linkify.onclick = function () {
        location.href = location.href.split('?')[0] + '?' + encodeURIComponent(code.value);
      };
      code.onkeyup = Delayed(onkeyup, 1000);
      if (value.length) {
        code.value = decodeURIComponent(value);
        onkeyup.call(code);
      }
    }());
    </script>
  </body>
</html>
